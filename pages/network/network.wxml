<!--pages/network/network.wxml-->
<view class="page-{{skin}}">
  <navbar loading="{{navbar.loading}}" show="{{navbar.show}}" color="{{navbar.color}}" background="{{navbar.background}}" title="配网"></navbar>

  <view class="{{skin}}">
    <view class="content">
      <view class="content" hidden="{{connectStatus!=0}}">
        <view class="shezhi-content shezhi-button-bg" bindtap="getConnected">
          <view class="shezhi-button-left">当前连接WI-FI</view>
          <view class="shezhi-button-right">
            <input class="shezhi-button-name" style="text-align: right;height: 100%;" bindinput="wifiSSIDInputChange" placeholder="请输入wifi账号" value="{{wifiSSID}}" type="text"></input>
            <image bindtap="selectWifi" class="shezhi-button-icon" src="../../images/{{skin}}/row@3x.png"></image>
          </view>
        </view>

        <view class="shezhi-content shezhi-button-bg" bindtap="changeSkip">
          <view class="shezhi-button-left">密码</view>
          <view class="shezhi-button-right">
            <input class="shezhi-button-name" style="text-align: right;height: 100%;" bindinput="wifiPasswordInputChange" placeholder="请输入wifi密码" value="{{wifiPwd}}" type="text" password="{{wifiShow}}"></input>
            <image class="shezhi-button-icon" src="../../images/{{skin}}/icon_eye@2x.png" bindtap="showHide"></image>
          </view>
        </view>

        <view class="shezhi-content" style="margin-top: 0rpx;">
          <image class="shezhi-button-icon" bindtap="remeberPwd" src="../../images/{{skin}}/icon_ro_{{hasRemeberPwd?'selected':'unselected'}}@2x.png"></image>
          <view bindtap="remeberPwd" style="flex: 1;color: white;margin-left: 8rpx;font-size: 24rpx;">记住密码</view>
          <view style="display: flex;color: white;font-size: 24rpx;">此设备只支持2.4GWi-Fi连接使用</view>
        </view>

        <view class="next-button" bindtap="next">下一步</view>
      </view>

      <view class="content" hidden="{{connectStatus==0}}">
        <!-- 配网中 -->
        <block wx:if="{{connectStatus==1}}">
          <view class="body-title white">正在配置Wi-Fi，请勿退出！</view>
          <view class="body-desc grep">整个过程大约需要1分钟，请您耐心等待</view>
        </block>
        <!-- 配网失败 -->
        <block wx:if="{{connectStatus==2}}">
          <view class="body-title" style="display: flex;align-items: center;">
            <image class="shezhi-button-icon" src="../../images/{{skin}}/icon_failed@2x.png"></image>
            <view class="red" style="margin-left: 15rpx;">Wi-Fi配置失败</view>
          </view>
          <view class="body-desc grep">请核对您的路由器名称和密码是否正确后重试</view>
          <view class="next-button" bindtap="retry">重试</view>
          <view bindtap="cancel" class="button-cancel">取消</view>
        </block>
        <!-- 配网成功 -->
        <block wx:if="{{connectStatus==3}}">
          <view class="body-title" style="display: flex;align-items: center;">
            <image class="shezhi-button-icon" src="../../images/{{skin}}/icon_success@2x.png"></image>
            <view class="green" style="margin-left: 15rpx;">Wi-Fi配置成功</view>
          </view>
          <view class="body-desc grep">设备联网成功</view>
          <view class="next-button" bindtap="finish">完成</view>
        </block>
        <!-- 配网成功，连接失败 -->
        <block wx:if="{{connectStatus==4}}">
          <view class="body-title" style="display: flex;align-items: center;">
            <image class="shezhi-button-icon" src="../../images/{{skin}}/icon_failed@2x.png"></image>
            <view class="red" style="margin-left: 15rpx;">Wi-Fi配置成功，设备联网失败</view>
          </view>
          <view class="body-desc grep">请检查您的路由器是否正常上网，确认可以上网后重试</view>
          <view class="next-button" bindtap="retry">重试</view>
          <view bindtap="cancel" class="button-cancel">取消</view>
        </block>
      </view>
    </view>
  </view>



  <view class="modal-dialog" hidden="{{!dialogShow}}">
    <view class="modal-box">
      <text class="modal-box-title" style="margin-bottom:30rpx;margin-top:30rpx;">模式选择</text>
      <view style="width:100%;height:1px;background:#eee"></view>

      <view class="model-content">
        <radio-group bindchange="radioChange" class="radio-group">
          <block wx:for="{{items}}" wx:key="key">
            <label class="model-label">
              <view>
                <radio class="radio" value="{{item.value}}" checked="{{item.value==selectedRadio}}" />
              </view>
              <view class="model-item-name">{{item.name}}</view>
            </label>
            <view style="width:100%;height:1px;background:#eee"></view>
          </block>
        </radio-group>
      </view>

      <view style="width:100%;height:1px;background:#eee"></view>
      <view class="modal-box-bottom" style="height:100rpx;">
        <view bindtap="onModalClick" data-ctype="cancel" class="modal-box-button" hover-class="modal-box-button-hover" style="flex-grow:1;color:black">取消</view>
        <view style="width:1rpx;height:100%;background:#eee"></view>
        <view bindtap="onModalClick" data-ctype="confirm" class="modal-box-button" hover-class="modal-box-button-hover" style="flex-grow:1;color:#59B84D;">确定</view>
      </view>
    </view>
  </view>

</view>